'use strict';const _0x1bd639=_0x27aa;(function(_0x10476,_0x18789b){const _0x4312e9=_0x27aa,_0x5e6a99=_0x10476();while(!![]){try{const _0x4eced7=-parseInt(_0x4312e9(0xd3))/0x1*(-parseInt(_0x4312e9(0xb4))/0x2)+parseInt(_0x4312e9(0xa1))/0x3*(parseInt(_0x4312e9(0xb8))/0x4)+-parseInt(_0x4312e9(0xc0))/0x5+parseInt(_0x4312e9(0xa6))/0x6+-parseInt(_0x4312e9(0xd0))/0x7*(-parseInt(_0x4312e9(0x9e))/0x8)+-parseInt(_0x4312e9(0xce))/0x9+-parseInt(_0x4312e9(0xbc))/0xa*(parseInt(_0x4312e9(0xb1))/0xb);if(_0x4eced7===_0x18789b)break;else _0x5e6a99['push'](_0x5e6a99['shift']());}catch(_0x23116b){_0x5e6a99['push'](_0x5e6a99['shift']());}}}(_0x4061,0x60eab));Object[_0x1bd639(0xad)](exports,_0x1bd639(0xc9),{'value':!![]}),exports[_0x1bd639(0xbf)]=void 0x0;const tinkoff_invest_api_1=require(_0x1bd639(0xcc)),orders_1=require(_0x1bd639(0xd4)),uuid_1=require(_0x1bd639(0x9c)),messenger_1=require(_0x1bd639(0xb7));class Wallet{constructor(_0x4c7fe2,_0x44001b,_0x247dd0){const _0x5a9c4f=_0x1bd639;this[_0x5a9c4f(0xc7)]=_0x4c7fe2,this[_0x5a9c4f(0xc2)]=_0x44001b,this[_0x5a9c4f(0xab)]=_0x247dd0,this['message']=new messenger_1[(_0x5a9c4f(0xcd))](),this[_0x5a9c4f(0xa8)]=new Set();}async['init'](){const _0xdc68dc=_0x1bd639;this[_0xdc68dc(0xac)]=new tinkoff_invest_api_1[(_0xdc68dc(0xc8))](this['api'],this[_0xdc68dc(0xc2)]),console[_0xdc68dc(0xb6)](_0xdc68dc(0xc4));}[_0x1bd639(0x9b)](){const _0x3bc343=_0x1bd639;this['portfolio']=undefined,this['account']=undefined,this[_0x3bc343(0xa8)][_0x3bc343(0xaf)](_0x588206=>this[_0x3bc343(0xa4)](_0x588206,_0x3bc343(0x9d),'Все',0x0)),console[_0x3bc343(0xb6)](_0x3bc343(0xca));}[_0x1bd639(0xa9)](_0xf75ffb,_0x504e50,_0x1b03a0,_0x2dcc61){const _0x8ca63f=_0x1bd639;if(!this['account'])return;const _0x4a1adf=_0x2dcc61?_0x2dcc61:_0x504e50[_0x8ca63f(0xb5)][_0x8ca63f(0xbd)](_0x8ca63f(0x9f))?this[_0x8ca63f(0xab)][_0x8ca63f(0xbe)][_0x8ca63f(0xa3)]:this[_0x8ca63f(0xab)][_0x8ca63f(0xbe)][_0x8ca63f(0xc1)],_0x285bc4=Math[_0x8ca63f(0xd5)](Math[_0x8ca63f(0xd5)](_0x4a1adf/(_0xf75ffb*_0x504e50[_0x8ca63f(0xcf)]))),_0x16182d=!_0x285bc4?0x1:_0x285bc4,_0x9c8556=_0x504e50[_0x8ca63f(0xaa)]+':\x20'+_0x16182d+_0x8ca63f(0xa7)+_0xf75ffb;this[_0x8ca63f(0xa2)][_0x8ca63f(0xae)](_0x1b03a0,_0x9c8556),this[_0x8ca63f(0xac)][_0x8ca63f(0xd1)]({'figi':_0x504e50[_0x8ca63f(0x9a)],'quantity':_0x16182d,'price':this['api'][_0x8ca63f(0xc3)][_0x8ca63f(0xb9)](_0xf75ffb),'direction':orders_1[_0x8ca63f(0xbb)][_0x8ca63f(0xa5)],'orderType':orders_1['OrderType'][_0x8ca63f(0xb2)],'orderId':(0x0,uuid_1['v4'])()})['then'](_0xac891c=>{const _0x5abba8=_0x8ca63f;this[_0x5abba8(0xa2)][_0x5abba8(0xc6)](_0x1b03a0,_0x9c8556,_0x5abba8(0xd2),_0x504e50[_0x5abba8(0xaa)]),_0xac891c&&_0xac891c[_0x5abba8(0xb0)]&&this[_0x5abba8(0xa8)][_0x5abba8(0xba)](_0xac891c[_0x5abba8(0xb0)]),this['cancelOrder'](_0xac891c&&_0xac891c[_0x5abba8(0xb0)],_0x1b03a0,_0x504e50[_0x5abba8(0xaa)],0x3d*0x3e8);})[_0x8ca63f(0xcb)](_0x26e0b9=>{const _0x465612=_0x8ca63f;var _0x16d991;this[_0x465612(0xa2)][_0x465612(0xc6)](_0x1b03a0,_0x9c8556,_0x465612(0xb3),_0x504e50[_0x465612(0xaa)],(_0x16d991=_0x26e0b9===null||_0x26e0b9===void 0x0?void 0x0:_0x26e0b9['payload'])===null||_0x16d991===void 0x0?void 0x0:_0x16d991[_0x465612(0xa2)]);});}[_0x1bd639(0xa4)](_0x4e9c55,_0x49ed2e,_0x3d0aab,_0x120ac5){if(_0x4e9c55)setTimeout(()=>{const _0xef0187=_0x27aa;this[_0xef0187(0xac)]&&this[_0xef0187(0xac)][_0xef0187(0xa4)](_0x4e9c55)['then'](_0x9c5fc9=>{const _0x400f0f=_0xef0187;this[_0x400f0f(0xa2)][_0x400f0f(0xc5)](_0x49ed2e,_0x400f0f(0xd2),_0x3d0aab),this[_0x400f0f(0xa8)]['delete'](_0x4e9c55);})[_0xef0187(0xcb)](_0x26846b=>{const _0x2f33f8=_0xef0187;var _0x528ec4;this[_0x2f33f8(0xa2)][_0x2f33f8(0xc5)](_0x49ed2e,_0x2f33f8(0xb3),_0x3d0aab,(_0x528ec4=_0x26846b===null||_0x26846b===void 0x0?void 0x0:_0x26846b[_0x2f33f8(0xa0)])===null||_0x528ec4===void 0x0?void 0x0:_0x528ec4[_0x2f33f8(0xa2)]);});},_0x120ac5);}}function _0x27aa(_0x80277d,_0x51c9b1){const _0x406119=_0x4061();return _0x27aa=function(_0x27aaaf,_0x2c6887){_0x27aaaf=_0x27aaaf-0x9a;let _0xca8bc7=_0x406119[_0x27aaaf];return _0xca8bc7;},_0x27aa(_0x80277d,_0x51c9b1);}function _0x4061(){const _0x2c20e4=['Wallet','1217530gJmKDx','foreignMaxMoneySize','accountId','helpers','Кошелек\x20запущен','cancelLimitOrderLogMessage','openLimitOrderLogMessage','api','RealAccount','__esModule','Кошелек\x20выключен','catch','tinkoff-invest-api','Messenger','2165481yaeMxp','lot','21aItLxl','postOrder','success','47TbNTsX','tinkoff-invest-api/cjs/generated/orders','floor','figi','stop','uuid','Выключение','1942456mhFBkj','FORTS_EVENING','payload','411KETcMg','message','maxMOEXMoneySize','cancelOrder','ORDER_DIRECTION_BUY','402522jqhcFs','\x20по\x20','activeOrders','buy','ticker','options','account','defineProperty','byLogMessage','forEach','orderId','2089274GswZcj','ORDER_TYPE_LIMIT','error','20234cfIkkH','exchange','log','./messenger','5252YWUoAZ','toQuotation','add','OrderDirection','30HVrqPO','includes','drop'];_0x4061=function(){return _0x2c20e4;};return _0x4061();}exports[_0x1bd639(0xbf)]=Wallet;