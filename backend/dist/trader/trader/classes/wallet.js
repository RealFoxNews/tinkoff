'use strict';const _0x594e93=_0x4121;(function(_0x402745,_0x86f398){const _0x25ab10=_0x4121,_0x4790ce=_0x402745();while(!![]){try{const _0xfe94fd=-parseInt(_0x25ab10(0x147))/0x1+-parseInt(_0x25ab10(0x145))/0x2*(-parseInt(_0x25ab10(0x15a))/0x3)+parseInt(_0x25ab10(0x155))/0x4*(parseInt(_0x25ab10(0x142))/0x5)+-parseInt(_0x25ab10(0x16c))/0x6*(parseInt(_0x25ab10(0x12d))/0x7)+-parseInt(_0x25ab10(0x161))/0x8*(-parseInt(_0x25ab10(0x135))/0x9)+parseInt(_0x25ab10(0x14c))/0xa+-parseInt(_0x25ab10(0x132))/0xb;if(_0xfe94fd===_0x86f398)break;else _0x4790ce['push'](_0x4790ce['shift']());}catch(_0x3c9c98){_0x4790ce['push'](_0x4790ce['shift']());}}}(_0x5205,0xb02a8));Object[_0x594e93(0x141)](exports,_0x594e93(0x14b),{'value':!![]}),exports[_0x594e93(0x15e)]=void 0x0;const tinkoff_invest_api_1=require('tinkoff-invest-api'),orders_1=require(_0x594e93(0x137)),uuid_1=require(_0x594e93(0x133)),messenger_1=require(_0x594e93(0x15c)),perf_hooks_1=require(_0x594e93(0x16b));class Wallet{constructor(_0x5e107e,_0x15dfa6,_0x4fbfa2){const _0x21ed53=_0x594e93;this['api']=_0x5e107e,this[_0x21ed53(0x14f)]=_0x15dfa6,this[_0x21ed53(0x14d)]=_0x4fbfa2,this[_0x21ed53(0x153)]=new messenger_1['Messenger'](),this['activeOrders']=new Set();}async[_0x594e93(0x12c)](){const _0x46a72d=_0x594e93,_0x3e9510=perf_hooks_1[_0x46a72d(0x160)]['now']();this[_0x46a72d(0x166)]=new tinkoff_invest_api_1[(_0x46a72d(0x14e))](this[_0x46a72d(0x156)],this[_0x46a72d(0x14f)]),console[_0x46a72d(0x13e)]('Кошелек\x20запущен');const _0x5713d6=perf_hooks_1[_0x46a72d(0x160)]['now']();console[_0x46a72d(0x13e)](_0x46a72d(0x131)+(_0x5713d6-_0x3e9510)[_0x46a72d(0x158)](0x2)+'\x20мс');}[_0x594e93(0x13a)](){const _0x8abc1c=_0x594e93;this[_0x8abc1c(0x143)]=undefined,this[_0x8abc1c(0x166)]=undefined,this[_0x8abc1c(0x150)][_0x8abc1c(0x157)](_0x389011=>this[_0x8abc1c(0x130)](_0x389011,_0x8abc1c(0x159),_0x8abc1c(0x138),0x0)),console['log'](_0x8abc1c(0x140));}['buy'](_0x412c19,_0x283fff,_0x288576,_0x135585){const _0x23b8f9=_0x594e93;if(!this[_0x23b8f9(0x166)])return;const _0x1e52a1=_0x135585?_0x135585:_0x283fff[_0x23b8f9(0x13f)][_0x23b8f9(0x12f)](_0x23b8f9(0x15b))?this['options'][_0x23b8f9(0x151)][_0x23b8f9(0x14a)]:this[_0x23b8f9(0x14d)][_0x23b8f9(0x151)]['foreignMaxMoneySize'],_0x236463=Math[_0x23b8f9(0x149)](Math[_0x23b8f9(0x149)](_0x1e52a1/(_0x412c19*_0x283fff['lot']))),_0x3e2fea=!_0x236463?0x1:_0x236463,_0x3b8022=_0x283fff[_0x23b8f9(0x139)]+':\x20'+_0x3e2fea+'\x20по\x20'+_0x412c19;this[_0x23b8f9(0x153)][_0x23b8f9(0x168)](_0x288576,_0x3b8022);const _0x526bfc=perf_hooks_1[_0x23b8f9(0x160)]['now']();this[_0x23b8f9(0x166)][_0x23b8f9(0x146)]({'figi':_0x283fff[_0x23b8f9(0x163)],'quantity':_0x3e2fea,'price':this[_0x23b8f9(0x156)]['helpers'][_0x23b8f9(0x144)](_0x412c19),'direction':orders_1['OrderDirection'][_0x23b8f9(0x13d)],'orderType':orders_1[_0x23b8f9(0x136)][_0x23b8f9(0x169)],'orderId':(0x0,uuid_1['v4'])()})['then'](_0x5e7e83=>{const _0x1cf610=_0x23b8f9,_0x309564=perf_hooks_1[_0x1cf610(0x160)][_0x1cf610(0x15f)]();console[_0x1cf610(0x13e)](_0x1cf610(0x152)+(_0x309564-_0x526bfc)['toFixed'](0x2)+_0x1cf610(0x12e)),this['message'][_0x1cf610(0x167)](_0x288576,_0x3b8022,_0x1cf610(0x13b),_0x283fff['ticker']),_0x5e7e83&&_0x5e7e83[_0x1cf610(0x134)]&&this[_0x1cf610(0x150)][_0x1cf610(0x165)](_0x5e7e83['orderId']),this[_0x1cf610(0x130)](_0x5e7e83&&_0x5e7e83[_0x1cf610(0x134)],_0x288576,_0x283fff[_0x1cf610(0x139)],0x3d*0x3e8);})[_0x23b8f9(0x15d)](_0x5670d3=>{const _0x43821f=_0x23b8f9;var _0x160b72;const _0x5b78ea=perf_hooks_1[_0x43821f(0x160)]['now']();console[_0x43821f(0x13e)](_0x43821f(0x154)+(_0x5b78ea-_0x526bfc)[_0x43821f(0x158)](0x2)+_0x43821f(0x12e)),this[_0x43821f(0x153)][_0x43821f(0x167)](_0x288576,_0x3b8022,_0x43821f(0x164),_0x283fff[_0x43821f(0x139)],(_0x160b72=_0x5670d3===null||_0x5670d3===void 0x0?void 0x0:_0x5670d3[_0x43821f(0x148)])===null||_0x160b72===void 0x0?void 0x0:_0x160b72['message']);});}['cancelOrder'](_0x3b4f7a,_0x4027cb,_0x450f99,_0xc0486f){if(_0x3b4f7a)setTimeout(()=>{const _0x60d893=_0x4121;if(this[_0x60d893(0x166)]){const _0x265b26=perf_hooks_1[_0x60d893(0x160)][_0x60d893(0x15f)]();this[_0x60d893(0x166)]['cancelOrder'](_0x3b4f7a)['then'](_0x3632eb=>{const _0x1c6b9e=_0x60d893,_0x3ddb32=perf_hooks_1['performance'][_0x1c6b9e(0x15f)]();console[_0x1c6b9e(0x13e)](_0x1c6b9e(0x162)+(_0x3ddb32-_0x265b26)[_0x1c6b9e(0x158)](0x2)+_0x1c6b9e(0x12e)),this[_0x1c6b9e(0x153)]['cancelLimitOrderLogMessage'](_0x4027cb,_0x1c6b9e(0x13b),_0x450f99),this['activeOrders']['delete'](_0x3b4f7a);})[_0x60d893(0x15d)](_0x55a145=>{const _0x3dcd1d=_0x60d893;var _0x36813e;const _0x26d13a=perf_hooks_1[_0x3dcd1d(0x160)][_0x3dcd1d(0x15f)]();console['log'](_0x3dcd1d(0x13c)+(_0x26d13a-_0x265b26)[_0x3dcd1d(0x158)](0x2)+_0x3dcd1d(0x12e)),this[_0x3dcd1d(0x153)][_0x3dcd1d(0x16a)](_0x4027cb,_0x3dcd1d(0x164),_0x450f99,(_0x36813e=_0x55a145===null||_0x55a145===void 0x0?void 0x0:_0x55a145[_0x3dcd1d(0x148)])===null||_0x36813e===void 0x0?void 0x0:_0x36813e['message']);});}},_0xc0486f);}}function _0x4121(_0x18b585,_0x2227fd){const _0x520535=_0x5205();return _0x4121=function(_0x41217b,_0x31c691){_0x41217b=_0x41217b-0x12c;let _0x5a93da=_0x520535[_0x41217b];return _0x5a93da;},_0x4121(_0x18b585,_0x2227fd);}function _0x5205(){const _0x4c7d5b=['ticker','stop','success','Время\x20выполнения\x20cancelOrder\x20(с\x20ошибкой):\x20','ORDER_DIRECTION_BUY','log','exchange','Кошелек\x20выключен','defineProperty','474245OdbvTj','portfolio','toQuotation','46tAjONc','postOrder','496952SesBvU','payload','floor','maxMOEXMoneySize','__esModule','5054380JxhHeX','options','RealAccount','accountId','activeOrders','drop','Время\x20выполнения\x20postOrder:\x20','message','Время\x20выполнения\x20postOrder\x20(с\x20ошибкой):\x20','24gOpLzK','api','forEach','toFixed','Выключение','74301dvGXtJ','FORTS_EVENING','./messenger','catch','Wallet','now','performance','12968FZcXxi','Время\x20выполнения\x20cancelOrder:\x20','figi','error','add','account','openLimitOrderLogMessage','byLogMessage','ORDER_TYPE_LIMIT','cancelLimitOrderLogMessage','perf_hooks','13278psKaeQ','init','427fygxzq','\x20мс','includes','cancelOrder','Время\x20инициализации\x20аккаунта:\x20','10668361YRlSeQ','uuid','orderId','3771wDxHDZ','OrderType','tinkoff-invest-api/cjs/generated/orders','Все'];_0x5205=function(){return _0x4c7d5b;};return _0x5205();}exports[_0x594e93(0x15e)]=Wallet;