'use strict';function _0x2d7c(){const _0x580132=['1503IsdQdy','18vYKejb','from','reloadOptions','20TTmWfU','users','1468400athxXv','200240zThvDq','options','getShares','tinkoff-invest-api/cjs/generated/instruments','\x1b[36m%s\x1b[0m','\x1b[37m','\x1b[31m','path','wallet','BASE_CONFIG','../../models/base.config','2qxTaDd','287784VsryhC','271091oedhxh','getShares$','defineProperty','api','next','__esModule','merge','6713960bDszrS','toString','INSTRUMENT_STATUS_BASE','instruments','544zoEeXn','onCloseWallet','status','getAccounts','onOpenWallet','rxjs','11886ngTUIx','readFileSync','log','join','BaseTrader','Subject','InstrumentStatus','Апи\x20запущено','onCloseApi'];_0x2d7c=function(){return _0x580132;};return _0x2d7c();}const _0xa1640e=_0x6436;(function(_0x3953d1,_0x1389f4){const _0x2b7535=_0x6436,_0x5294c5=_0x3953d1();while(!![]){try{const _0x5627c6=parseInt(_0x2b7535(0x150))/0x1*(-parseInt(_0x2b7535(0x14e))/0x2)+parseInt(_0x2b7535(0x16a))/0x3*(parseInt(_0x2b7535(0x15b))/0x4)+-parseInt(_0x2b7535(0x170))/0x5+-parseInt(_0x2b7535(0x16b))/0x6*(parseInt(_0x2b7535(0x161))/0x7)+-parseInt(_0x2b7535(0x171))/0x8+parseInt(_0x2b7535(0x14f))/0x9*(parseInt(_0x2b7535(0x16e))/0xa)+parseInt(_0x2b7535(0x157))/0xb;if(_0x5627c6===_0x1389f4)break;else _0x5294c5['push'](_0x5294c5['shift']());}catch(_0x13e4c4){_0x5294c5['push'](_0x5294c5['shift']());}}}(_0x2d7c,0x24061));Object[_0xa1640e(0x152)](exports,_0xa1640e(0x155),{'value':!![]}),exports[_0xa1640e(0x165)]=void 0x0;const fs=require('fs'),path=require(_0xa1640e(0x178)),rxjs_1=require(_0xa1640e(0x160)),base_config_1=require(_0xa1640e(0x17b)),instruments_1=require(_0xa1640e(0x174)),merge_util_1=require('../../utils/merge.util');function _0x6436(_0x212105,_0x42a50a){const _0x2d7c67=_0x2d7c();return _0x6436=function(_0x6436af,_0x4231a4){_0x6436af=_0x6436af-0x14e;let _0x38388d=_0x2d7c67[_0x6436af];return _0x38388d;},_0x6436(_0x212105,_0x42a50a);}class BaseTrader{constructor(){const _0x20a51e=_0xa1640e;this[_0x20a51e(0x15d)]=new rxjs_1[(_0x20a51e(0x166))](),this['status'][_0x20a51e(0x154)]({'status':_0x20a51e(0x153),'alive':![]}),this['status'][_0x20a51e(0x154)]({'status':'wallet','alive':![]});}['initializeOptions'](){const _0x4d8c55=_0xa1640e;this['options']=(0x0,merge_util_1[_0x4d8c55(0x156)])(base_config_1[_0x4d8c55(0x17a)],JSON['parse'](fs[_0x4d8c55(0x162)](path[_0x4d8c55(0x164)](__dirname,'..','..','..','..','config.json'))[_0x4d8c55(0x158)]()));}[_0xa1640e(0x16d)](_0xc3ece0){const _0x356700=_0xa1640e;this['options']=(0x0,merge_util_1[_0x356700(0x156)])(this[_0x356700(0x172)],_0xc3ece0);}['onOpenApi'](){const _0x4a4247=_0xa1640e;this[_0x4a4247(0x15d)]['next']({'status':_0x4a4247(0x153),'alive':!![]}),console['log'](_0x4a4247(0x175),_0x4a4247(0x168),_0x4a4247(0x176));}[_0xa1640e(0x169)](){const _0x5056f0=_0xa1640e;this[_0x5056f0(0x153)]=undefined,this[_0x5056f0(0x15d)]['next']({'status':_0x5056f0(0x153),'alive':![]}),console[_0x5056f0(0x163)](_0x5056f0(0x177),'Апи\x20выключено',_0x5056f0(0x176));}[_0xa1640e(0x15f)](){const _0x11fce6=_0xa1640e;this['status']['next']({'status':_0x11fce6(0x179),'alive':!![]});}[_0xa1640e(0x15c)](){const _0x2f4509=_0xa1640e;var _0x317495;(_0x317495=this[_0x2f4509(0x179)])===null||_0x317495===void 0x0?void 0x0:_0x317495['stop'](),this[_0x2f4509(0x179)]=undefined,this[_0x2f4509(0x15d)][_0x2f4509(0x154)]({'status':_0x2f4509(0x179),'alive':![]});}async[_0xa1640e(0x15e)](){const _0x24a0ae=_0xa1640e;console['log'](this[_0x24a0ae(0x153)]);if(!this[_0x24a0ae(0x153)])return null;const {accounts:_0x85b888}=await this[_0x24a0ae(0x153)][_0x24a0ae(0x16f)]['getAccounts']({});return console[_0x24a0ae(0x163)](_0x85b888),_0x85b888;}async[_0xa1640e(0x173)](){const _0x1d1703=_0xa1640e;if(!this[_0x1d1703(0x153)])return null;const _0x5e40bf=await this[_0x1d1703(0x153)][_0x1d1703(0x15a)]['futures']({'instrumentStatus':instruments_1[_0x1d1703(0x167)][_0x1d1703(0x159)]});return _0x5e40bf[_0x1d1703(0x15a)];}[_0xa1640e(0x151)](){const _0x5b0db0=_0xa1640e;return(0x0,rxjs_1[_0x5b0db0(0x16c)])(this[_0x5b0db0(0x173)]());}}exports[_0xa1640e(0x165)]=BaseTrader;