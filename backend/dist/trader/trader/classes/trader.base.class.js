'use strict';const _0x47f5de=_0xe547;function _0xe547(_0x21e745,_0x1226b0){const _0x5d7d30=_0x5d7d();return _0xe547=function(_0xe547b8,_0x4cf090){_0xe547b8=_0xe547b8-0x1cf;let _0x27b0fc=_0x5d7d30[_0xe547b8];return _0x27b0fc;},_0xe547(_0x21e745,_0x1226b0);}(function(_0x3294e0,_0x461218){const _0x1ac66c=_0xe547,_0x41e657=_0x3294e0();while(!![]){try{const _0x1e174d=-parseInt(_0x1ac66c(0x1e4))/0x1+parseInt(_0x1ac66c(0x1ec))/0x2*(parseInt(_0x1ac66c(0x1e2))/0x3)+-parseInt(_0x1ac66c(0x1d6))/0x4*(-parseInt(_0x1ac66c(0x1df))/0x5)+-parseInt(_0x1ac66c(0x1eb))/0x6+-parseInt(_0x1ac66c(0x1ef))/0x7*(-parseInt(_0x1ac66c(0x1f5))/0x8)+-parseInt(_0x1ac66c(0x1e1))/0x9*(-parseInt(_0x1ac66c(0x1ed))/0xa)+parseInt(_0x1ac66c(0x1f0))/0xb*(parseInt(_0x1ac66c(0x1f1))/0xc);if(_0x1e174d===_0x461218)break;else _0x41e657['push'](_0x41e657['shift']());}catch(_0x48795a){_0x41e657['push'](_0x41e657['shift']());}}}(_0x5d7d,0xe719b));function _0x5d7d(){const _0x392c3c=['BASE_CONFIG','1475681tyvCXB','instruments','getAccounts','Subject','defineProperty','api','tinkoff-invest-api/cjs/generated/instruments','7287570JjvMux','1341448XNSCjq','1162930CchFBb','parse','269563OkxBXL','297lXLEcv','124440YVUJNG','merge','onOpenWallet','stop','256dPhXIR','status','onCloseWallet','wallet','Апи\x20запущено','\x1b[31m','toString','users','next','../../utils/merge.util','log','INSTRUMENT_STATUS_BASE','668784JkzSNz','options','InstrumentStatus','readFileSync','getShares$','config.json','onCloseApi','\x1b[37m','join','40Emobwe','Апи\x20выключено','9eAUHbp','3EwkzGN'];_0x5d7d=function(){return _0x392c3c;};return _0x5d7d();}Object[_0x47f5de(0x1e8)](exports,'__esModule',{'value':!![]}),exports['BaseTrader']=void 0x0;const fs=require('fs'),path=require('path'),rxjs_1=require('rxjs'),base_config_1=require('../../models/base.config'),instruments_1=require(_0x47f5de(0x1ea)),merge_util_1=require(_0x47f5de(0x1d3));class BaseTrader{constructor(){const _0x42b5bb=_0x47f5de;this['status']=new rxjs_1[(_0x42b5bb(0x1e7))](),this[_0x42b5bb(0x1f6)][_0x42b5bb(0x1d2)]({'status':_0x42b5bb(0x1e9),'alive':![]}),this[_0x42b5bb(0x1f6)][_0x42b5bb(0x1d2)]({'status':_0x42b5bb(0x1f8),'alive':![]});}['initializeOptions'](){const _0x3abc5e=_0x47f5de;this[_0x3abc5e(0x1d7)]=(0x0,merge_util_1[_0x3abc5e(0x1f2)])(base_config_1[_0x3abc5e(0x1e3)],JSON[_0x3abc5e(0x1ee)](fs[_0x3abc5e(0x1d9)](path[_0x3abc5e(0x1de)](__dirname,'..','..','..','..',_0x3abc5e(0x1db)))[_0x3abc5e(0x1d0)]()));}['reloadOptions'](_0x320756){const _0x2e357c=_0x47f5de;this[_0x2e357c(0x1d7)]=(0x0,merge_util_1[_0x2e357c(0x1f2)])(this[_0x2e357c(0x1d7)],_0x320756);}['onOpenApi'](){const _0x44f487=_0x47f5de;this['status']['next']({'status':_0x44f487(0x1e9),'alive':!![]}),console['log']('\x1b[36m%s\x1b[0m',_0x44f487(0x1f9),_0x44f487(0x1dd));}[_0x47f5de(0x1dc)](){const _0x5a2be0=_0x47f5de;this[_0x5a2be0(0x1e9)]=undefined,this[_0x5a2be0(0x1f6)][_0x5a2be0(0x1d2)]({'status':_0x5a2be0(0x1e9),'alive':![]}),console['log'](_0x5a2be0(0x1cf),_0x5a2be0(0x1e0),'\x1b[37m');}[_0x47f5de(0x1f3)](){const _0x34d324=_0x47f5de;this[_0x34d324(0x1f6)][_0x34d324(0x1d2)]({'status':_0x34d324(0x1f8),'alive':!![]});}[_0x47f5de(0x1f7)](){const _0x19fe98=_0x47f5de;var _0x3c4ab0;(_0x3c4ab0=this[_0x19fe98(0x1f8)])===null||_0x3c4ab0===void 0x0?void 0x0:_0x3c4ab0[_0x19fe98(0x1f4)](),this[_0x19fe98(0x1f8)]=undefined,this[_0x19fe98(0x1f6)]['next']({'status':_0x19fe98(0x1f8),'alive':![]});}async[_0x47f5de(0x1e6)](){const _0x195d6b=_0x47f5de;console[_0x195d6b(0x1d4)](this[_0x195d6b(0x1e9)]);if(!this['api'])return null;const {accounts:_0x340929}=await this[_0x195d6b(0x1e9)][_0x195d6b(0x1d1)][_0x195d6b(0x1e6)]({});return console[_0x195d6b(0x1d4)](_0x340929),_0x340929;}async['getShares'](){const _0x1792fb=_0x47f5de;if(!this['api'])return null;const _0x19b4a6=await this[_0x1792fb(0x1e9)][_0x1792fb(0x1e5)]['futures']({'instrumentStatus':instruments_1[_0x1792fb(0x1d8)][_0x1792fb(0x1d5)]});return _0x19b4a6[_0x1792fb(0x1e5)];}[_0x47f5de(0x1da)](){return(0x0,rxjs_1['from'])(this['getShares']());}}exports['BaseTrader']=BaseTrader;