'use strict';const _0x4abe4b=_0x5108;function _0x5108(_0x2a15f3,_0x5d19a8){const _0x1a9af2=_0x1a9a();return _0x5108=function(_0x510846,_0x5d86a3){_0x510846=_0x510846-0xb9;let _0x36812c=_0x1a9af2[_0x510846];return _0x36812c;},_0x5108(_0x2a15f3,_0x5d19a8);}(function(_0x16899f,_0x43b7d5){const _0x593036=_0x5108,_0x367831=_0x16899f();while(!![]){try{const _0x19d5f0=-parseInt(_0x593036(0xec))/0x1*(parseInt(_0x593036(0xbf))/0x2)+-parseInt(_0x593036(0xf3))/0x3+parseInt(_0x593036(0x105))/0x4*(-parseInt(_0x593036(0xfc))/0x5)+parseInt(_0x593036(0xe3))/0x6+parseInt(_0x593036(0xf8))/0x7*(-parseInt(_0x593036(0xcb))/0x8)+parseInt(_0x593036(0xfe))/0x9+parseInt(_0x593036(0xd1))/0xa*(parseInt(_0x593036(0xc6))/0xb);if(_0x19d5f0===_0x43b7d5)break;else _0x367831['push'](_0x367831['shift']());}catch(_0x1e13fe){_0x367831['push'](_0x367831['shift']());}}}(_0x1a9a,0x53633));var __decorate=this&&this[_0x4abe4b(0xf9)]||function(_0xae1028,_0x4bcb86,_0x5f36cc,_0xb9aa9c){const _0x17acff=_0x4abe4b;var _0x477319=arguments['length'],_0x42f98c=_0x477319<0x3?_0x4bcb86:_0xb9aa9c===null?_0xb9aa9c=Object['getOwnPropertyDescriptor'](_0x4bcb86,_0x5f36cc):_0xb9aa9c,_0x544a17;if(typeof Reflect===_0x17acff(0xc7)&&typeof Reflect['decorate']===_0x17acff(0xe9))_0x42f98c=Reflect[_0x17acff(0xf0)](_0xae1028,_0x4bcb86,_0x5f36cc,_0xb9aa9c);else{for(var _0x4702d0=_0xae1028[_0x17acff(0xdf)]-0x1;_0x4702d0>=0x0;_0x4702d0--)if(_0x544a17=_0xae1028[_0x4702d0])_0x42f98c=(_0x477319<0x3?_0x544a17(_0x42f98c):_0x477319>0x3?_0x544a17(_0x4bcb86,_0x5f36cc,_0x42f98c):_0x544a17(_0x4bcb86,_0x5f36cc))||_0x42f98c;}return _0x477319>0x3&&_0x42f98c&&Object['defineProperty'](_0x4bcb86,_0x5f36cc,_0x42f98c),_0x42f98c;},__metadata=this&&this[_0x4abe4b(0xcc)]||function(_0x474b67,_0x295ef7){const _0x1961be=_0x4abe4b;if(typeof Reflect===_0x1961be(0xc7)&&typeof Reflect['metadata']===_0x1961be(0xe9))return Reflect['metadata'](_0x474b67,_0x295ef7);};Object[_0x4abe4b(0xf4)](exports,'__esModule',{'value':!![]}),exports[_0x4abe4b(0xd6)]=void 0x0;function _0x1a9a(){const _0x3bd6cb=['object','./services/share.reports','initializeApi','log','1024RhjgQu','__metadata','BaseTrader','shareFDA$','shareClose','then','31370IENNGH','./services/share.dividents','getShares','\x1b[36m%s\x1b[0m','shareDividends$','Trader','watch','./services/share.fda','enabled','ShareDividends','Injectable','Стратегии\x20выключены','sharesDrop','unWatch','length','onCloseWallet','ShareClose','\x1b[37m','251202rSyRtU','stopTrading','stopApi','reloadOptions','shareReports$','init','function','accountId','api','5677hdKvXz','./services/share.halts','shareReports','shareHalts$','decorate','ShareReports','initializeTrading','209541fekFLu','defineProperty','start','ShareFda','shareHalts','7910fBhekE','__decorate','shareDividends','startTrading','17135dLUtiI','stop','1186884puXavd','Стратегия\x20СЛЕЗА:\x20запущена','./classes/wallet','../stratagies/drop.shares','Стратегии\x20запущены','startStratagies','wallet','632QMJJdJ','stopStratagies','DropShares','drop','shareFDA','Api','@nestjs/common','options','26jMmypo','Wallet','settings','stoped','design:paramtypes','apiKey','onOpenWallet','3498JMmXIi'];_0x1a9a=function(){return _0x3bd6cb;};return _0x1a9a();}const common_1=require(_0x4abe4b(0xbd)),api_1=require('../api/api'),drop_shares_1=require(_0x4abe4b(0x101)),trader_base_class_1=require('./classes/trader.base.class'),wallet_1=require(_0x4abe4b(0x100)),share_close_1=require('./services/share.close'),share_dividents_1=require(_0x4abe4b(0xd2)),share_fda_1=require(_0x4abe4b(0xd8)),share_halts_1=require(_0x4abe4b(0xed)),share_reports_1=require(_0x4abe4b(0xc8));let Trader=class Trader extends trader_base_class_1[_0x4abe4b(0xcd)]{constructor(_0x1c03f0,_0x4387b3,_0x391da5,_0x49dd6a,_0x4fbef2){const _0x28f150=_0x4abe4b;super(),this['shareDividends']=_0x1c03f0,this[_0x28f150(0xbb)]=_0x4387b3,this[_0x28f150(0xf7)]=_0x391da5,this[_0x28f150(0xee)]=_0x49dd6a,this[_0x28f150(0xcf)]=_0x4fbef2,this['startTrading']()[_0x28f150(0xd0)]();}async[_0x4abe4b(0xfb)](){const _0xa3d24f=_0x4abe4b;this['initializeOptions'](),this['stopStratagies'](),await this[_0xa3d24f(0xe5)](),await this[_0xa3d24f(0xc9)](this[_0xa3d24f(0xbe)]),await this['stopTrading'](),await this['initializeTrading'](this['options']);}async[_0x4abe4b(0xc9)](_0x4d842e){const _0x20dbf1=_0x4abe4b;var _0x4573dd;if((_0x4573dd=_0x4d842e===null||_0x4d842e===void 0x0?void 0x0:_0x4d842e[_0x20dbf1(0xc1)])===null||_0x4573dd===void 0x0?void 0x0:_0x4573dd[_0x20dbf1(0xc4)]){this[_0x20dbf1(0xeb)]=new api_1[(_0x20dbf1(0xbc))]({'token':_0x4d842e['settings'][_0x20dbf1(0xc4)]}),this['onOpenApi']();const _0x1a7e46=await this[_0x20dbf1(0xd3)]();this[_0x20dbf1(0xd5)]=this[_0x20dbf1(0xfa)][_0x20dbf1(0xd7)]([]),this[_0x20dbf1(0xce)]=this[_0x20dbf1(0xbb)][_0x20dbf1(0xd7)]([]),this[_0x20dbf1(0xef)]=this[_0x20dbf1(0xf7)][_0x20dbf1(0xd7)]([]),this['shareReports$']=this[_0x20dbf1(0xee)]['watch']([]);}}async['stopApi'](){const _0x3ca816=_0x4abe4b;this[_0x3ca816(0xfa)][_0x3ca816(0xde)](),this[_0x3ca816(0xbb)][_0x3ca816(0xde)](),this[_0x3ca816(0xf7)][_0x3ca816(0xde)](),this[_0x3ca816(0xee)][_0x3ca816(0xde)](),this['onCloseApi']();}async[_0x4abe4b(0xf2)](_0x593f2b){const _0x21d851=_0x4abe4b;if(!this[_0x21d851(0xeb)]||!_0x593f2b[_0x21d851(0xc1)][_0x21d851(0xea)])return;this[_0x21d851(0x104)]=new wallet_1[(_0x21d851(0xc0))](this['api'],_0x593f2b[_0x21d851(0xc1)][_0x21d851(0xea)],this['options']),await this['wallet'][_0x21d851(0xe8)](),await this[_0x21d851(0x103)](),this[_0x21d851(0xc5)](),console[_0x21d851(0xca)](_0x21d851(0xd4),_0x21d851(0x102),'\x1b[37m');}async[_0x4abe4b(0xe4)](){const _0x59fe3f=_0x4abe4b;this[_0x59fe3f(0xe0)](),this[_0x59fe3f(0x106)](),console[_0x59fe3f(0xca)]('\x1b[31m',_0x59fe3f(0xdc),_0x59fe3f(0xe2));}async[_0x4abe4b(0x103)](){const _0xc5482c=_0x4abe4b;this[_0xc5482c(0xdd)]=new drop_shares_1[(_0xc5482c(0xb9))](this['api'],this[_0xc5482c(0xbe)][_0xc5482c(0xba)],this[_0xc5482c(0x104)]),this[_0xc5482c(0xbe)]['drop'][_0xc5482c(0xd9)]&&(await this[_0xc5482c(0xdd)][_0xc5482c(0xf5)](this[_0xc5482c(0xd5)],this[_0xc5482c(0xce)],this[_0xc5482c(0xef)],this['shareReports$']),console[_0xc5482c(0xca)](_0xc5482c(0xd4),_0xc5482c(0xff),_0xc5482c(0xe2)));}[_0x4abe4b(0x106)](){const _0x24e252=_0x4abe4b;this[_0x24e252(0xdd)]&&this['sharesDrop']['stop']();}[_0x4abe4b(0xe6)](_0x52a7e5){const _0x1ce89c=_0x4abe4b;var _0x157525;super[_0x1ce89c(0xe6)](_0x52a7e5),(_0x157525=this[_0x1ce89c(0xdd)])===null||_0x157525===void 0x0?void 0x0:_0x157525[_0x1ce89c(0xe6)](this[_0x1ce89c(0xbe)][_0x1ce89c(0xba)]),this[_0x1ce89c(0xdd)]&&(!_0x52a7e5[_0x1ce89c(0xba)]['enabled']&&!this[_0x1ce89c(0xdd)][_0x1ce89c(0xc2)]&&(this[_0x1ce89c(0xdd)][_0x1ce89c(0xfd)](),console[_0x1ce89c(0xca)](_0x1ce89c(0xd4),'Стратегия\x20СЛЕЗА:\x20выключена','\x1b[37m')),_0x52a7e5[_0x1ce89c(0xba)][_0x1ce89c(0xd9)]&&this[_0x1ce89c(0xdd)]['stoped']&&(this[_0x1ce89c(0xdd)]['start'](this[_0x1ce89c(0xd5)],this[_0x1ce89c(0xce)],this[_0x1ce89c(0xef)],this[_0x1ce89c(0xe7)])['then'](),console['log'](_0x1ce89c(0xd4),_0x1ce89c(0xff),_0x1ce89c(0xe2))));}};Trader=__decorate([(0x0,common_1[_0x4abe4b(0xdb)])(),__metadata(_0x4abe4b(0xc3),[share_dividents_1[_0x4abe4b(0xda)],share_fda_1[_0x4abe4b(0xf6)],share_halts_1['ShareHalts'],share_reports_1[_0x4abe4b(0xf1)],share_close_1[_0x4abe4b(0xe1)]])],Trader),exports['Trader']=Trader;